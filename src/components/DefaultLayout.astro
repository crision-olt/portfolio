---
interface Props {
  canonical?: string;
}

import "../styles/modern-normalize.css";
import "../styles/fonts.css";
import "../styles/vars.css";
import "../styles/global.scss";
import { yearsInIndustry } from "../js/yearsInIndustry";

import Header from "../components/Header.astro"
import Footer from "../components/Footer.astro"

const title = import.meta.env.PUBLIC_SITE_NAME;
const desc = `Software engineer, passionate about solving problems with code. Over ${yearsInIndustry()} years of industry experience specialising in JavaScript, React & Node.`;
const site_url = Astro.site;
const site_domain = import.meta.env.PUBLIC_SITE_DOMAIN;

// Props
const canonical = Astro.props.canonical || undefined;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    {canonical && <link rel="canonical" href={canonical}>}
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/favicon.png" type="image/png">
    <title>{title}</title>
    <meta name="description" content={desc}>
    <meta property="og:title" content={title} />
    <meta property="og:description" content={desc} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={site_url + (canonical || "")} />
    <meta property="og:image" content={site_url + "og-image.jpg"} />

    <!-- Initially set theme -->
    <script is:inline>
      (function() {
        const theme = localStorage.getItem("theme") || "dark";
        document.documentElement.classList.add(theme);
        window.theme = theme;
      })();
    </script>

    <!-- TODO: Analytics -->
    <!-- <script defer data-domain={site_domain} src={`https://analytics.${site_domain}/js/plausible.js`}></script> -->
  </head>
  <body class="page">
    <!-- Sounds -->
    <audio src="/sounds/switch.mp3" id="sound_switch" preload="auto" hidden></audio>

    <!-- Header -->
    <Header />

    <!-- Main content -->
    <main>
      <slot />
    </main>

    <!-- Footer -->
    <Footer />
  </body>
</html>

<style lang="scss">
  main {
    flex-grow: 1;
  }
</style>